<!DOCTYPE html>
<html lang="en">
    <head th:fragment="head">
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!--JQuery-->
        <script src="/js/jquery-3.4.1.min.js"></script>

        <!-- Bootstrap -->
        <link rel="stylesheet" href="/bootstrap/bootstrap.css" crossorigin="anonymous">
        <script src="/bootstrap/bootstrap.bundle.js"></script>
        <script src="/bootstrap/bootstrap-notify.js"></script>

        <!--Bootbox-->
        <script src="/js/bootbox.all.js"></script>

        <!--Query builder-->
        <script src="/js/interact.min.js"></script>
        <script src="/querybuilder/query-builder.standalone.js"></script>
        <script src="/querybuilder/query-builder.ru.js"></script>
        <link rel="stylesheet" href="/querybuilder/query-builder.default.css">

        <!-- DatePicker-->
        <script src="/datepicker/datepicker.min.js"></script>
        <link rel="stylesheet" href="/datepicker/datepicker.min.css">

        <!--Custom CSS-->
        <link rel="stylesheet" href="/style.css">
        <link rel="stylesheet" href="/bootstrap/animate.css">

        <!--Icons-->
        <link href="/font-awesome/css/font-awesome.css" rel="stylesheet">

        <!--Code editor ACE-->
        <script src="/js/ace.js"></script>

        <!-- CodeMirror-->
        <script src="/codemirror/codemirror.min.js"
                integrity="sha256-ATW7yAc4s2eVZZXJh6A51Xhh1crNOWZa9CgBSu88u1E=" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="/codemirror/codemirror.min.css"
              integrity="sha256-vZ3SaLOjnKO/gGvcUWegySoDU6ff33CS5i9ot8J9Czk=" crossorigin="anonymous" />

        <!--Chart JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.css">



        <title th:text="${seoTitle}"></title>
    </head>
<body>

<div th:fragment="top-menu">
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark mb-2">
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <th:block th:if="${user}">
                    <a href="/" class="navbar-brand">На главную</a>

                    <th:block th:if="${user.isAdmin()}">

                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarMQ" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                CJM
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarMQ">
                                <a class="dropdown-item" href="/admin/tguser/list">Telegram пользователи</a>
                                <a class="dropdown-item" href="/admin/event-driven-message/list">Сообщения</a>
                                <a class="dropdown-item" href="/admin/event-driven-message/setting/list">Переменные</a>
                                <a class="dropdown-item" href="/admin/tguser/stat">Отчеты</a>
                                <a class="dropdown-item" href="/admin/tguser/referral-setting/list">Реферальная система</a>
                            </div>
                        </li>

                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="serviceUtils" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Служебные инструменты
                            </a>

                            <div class="dropdown-menu" aria-labelledby="serviceUtils">
                                <a class="dropdown-item" href="/admin/remotecheckservers/settings">Сервера автопроверки</a>
                                <a class="dropdown-item" href="/admin/task/requestStat">Статистика по нагрузке</a>
                                <a class="dropdown-item" href="/admin/error/list">Ошибки</a>
                                <a class="dropdown-item" href="/admin/task/validate">Валидация задач автопроверки</a>
                                <a class="dropdown-item" href="/admin/bgtask/list">Фоновые задачи</a>
                                <a class="dropdown-item" href="/admin/log">Логи</a>
                            </div>
                        </li>

                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="navbarDocs" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                Документация
                            </a>
                            <div class="dropdown-menu" aria-labelledby="navbarDocs">
                                <a class="dropdown-item" href="/admin/doc?docName=api">Описание API</a>
                                <a class="dropdown-item" href="/admin/doc?docName=telegram-integrate">Интеграция с Телеграмом</a>
                                <a class="dropdown-item" href="/admin/doc?docName=event-driven-messages">Как писать сообщения</a>
                            </div>
                        </li>

                    </th:block>
                </th:block>
               </ul>

            <ul class="navbar-nav">

                <li class="nav-item">
                    <!--Log in and log out-->
                    <a th:href="${user} ? '/logout' : '/login'" th:text="${user} ? 'Выход' : 'Вход'" href="/" class="btn btn-sm" th:classappend="${user} ? btn-warning : btn-success"></a>
                </li>
            </ul>

        </div>
    </nav>
</div>

</body>
</html>